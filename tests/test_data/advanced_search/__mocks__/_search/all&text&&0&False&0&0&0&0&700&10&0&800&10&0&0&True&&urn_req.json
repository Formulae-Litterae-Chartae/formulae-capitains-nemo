{
  "query": {
    "bool": {
      "must": [
        {
          "nested": {
            "path": "specific_date",
            "query": {
              "bool": {
                "should": [
                  {
                    "bool": {
                      "must": [
                        {
                          "range": {
                            "specific_date.year": {
                              "gte": 700,
                              "lte": 800
                            }
                          }
                        },
                        {
                          "bool": {
                            "should": [
                              {
                                "bool": {
                                  "must": [
                                    {
                                      "match": {
                                        "specific_date.month": 10
                                      }
                                    },
                                    {
                                      "range": {
                                        "specific_date.day": {
                                          "gte": 1
                                        }
                                      }
                                    }
                                  ]
                                }
                              },
                              {
                                "range": {
                                  "specific_date.month": {
                                    "gt": 10,
                                    "lt": 10
                                  }
                                }
                              },
                              {
                                "bool": {
                                  "must": [
                                    {
                                      "match": {
                                        "specific_date.month": 10
                                      }
                                    },
                                    {
                                      "range": {
                                        "specific_date.day": {
                                          "lte": 31
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            ]
                          }
                        }
                      ]
                    }
                  }
                ]
              }
            }
          }
        }
      ]
    }
  },
  "sort": "urn",
  "from": 0,
  "size": 10,
  "aggs": {
    "range": {
      "date_range": {
        "field": "min_date",
        "format": "yyyy",
        "ranges": [
          {
            "key": "<499",
            "from": "0002",
            "to": "0499"
          },
          {
            "key": "500-599",
            "from": "0500",
            "to": "0599"
          },
          {
            "key": "600-699",
            "from": "0600",
            "to": "0699"
          },
          {
            "key": "700-799",
            "from": "0700",
            "to": "0799"
          },
          {
            "key": "800-899",
            "from": "0800",
            "to": "0899"
          },
          {
            "key": "900-999",
            "from": "0900",
            "to": "0999"
          },
          {
            "key": ">1000",
            "from": "1000"
          }
        ]
      }
    },
    "corpus": {
      "filters": {
        "filters": {
          "R\u00e4tien": {
            "match": {
              "_type": "raetien"
            }
          },
          "Angers": {
            "match": {
              "_type": "andecavensis"
            }
          },
          "B\u00fcnden": {
            "match": {
              "_type": "buenden"
            }
          },
          "Luzern": {
            "match": {
              "_type": "luzern"
            }
          },
          "Mondsee": {
            "match": {
              "_type": "mondsee"
            }
          },
          "Passau": {
            "match": {
              "_type": "passau"
            }
          },
          "Regensburg": {
            "match": {
              "_type": "regensburg"
            }
          },
          "Rheinisch": {
            "match": {
              "_type": "rheinisch"
            }
          },
          "Salzburg": {
            "match": {
              "_type": "salzburg"
            }
          },
          "Sch\u00e4ftlarn": {
            "match": {
              "_type": "schaeftlarn"
            }
          },
          "St. Gallen": {
            "match": {
              "_type": "stgallen"
            }
          },
          "Werden": {
            "match": {
              "_type": "werden"
            }
          },
          "Z\u00fcrich": {
            "match": {
              "_type": "zuerich"
            }
          }
        }
      }
    },
    "no_date": {
      "missing": {
        "field": "min_date"
      }
    }
  }
}