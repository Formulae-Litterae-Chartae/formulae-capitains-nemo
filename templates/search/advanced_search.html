{% extends "main::container.html" %}

{% block article %}
        <!-- BODY OF THE SEARCH PAGE - 1st row = title. -->
        <form action="" method="get" id="advanced-form">
            {{ form.hidden_tag() }}
            <div class="text-center"><h3><strong>{{ _('Erweiterte Suche') }}</strong></h3></div>
        <!-- 2d row = search entries. -->
            <div class="row justify-content-center">
                <div class="col-2">
                    <div class="text-center"><strong>{{ form.corpus.label }}</strong></div>
                    <ul class="corpus-ul">
                        <li><input id="all" name="" type="checkbox" value="all" onclick="checkSubCorpora(this, 'under-all')"> {{ _('Alle') }}</li>
                        <ul class="corpus-ul">
                            <li><input class="under-all" id="formulae" name="" type="checkbox" value="formulae" onclick="checkSubCorpora(this, 'under-formulae')"> Formulae</li>
                                <ul class="corpus-ul">
                                {% for choice in categories['formulae_collection'] %}
                                    <li><input class="under-formulae under-all" id="{{ choice[0] }}" name="corpus" type="checkbox" value="{{ choice[0] }}"> {{ choice[1] }}</li>
                                {% endfor %}
                                </ul>
                            <li><input class="under-all" id="chartae" name="" type="checkbox" value="chartae" onclick="checkSubCorpora(this, 'under-chartae')"> Chartae</li>
                                <ul class="corpus-ul">
                                {% for choice in categories['other_collection'] %}
                                    <li><input class="under-chartae under-all" id="{{ choice[0] }}" name="corpus" type="checkbox" value="{{ choice[0] }}"> {{ choice[1] }}</li>
                                {% endfor %}
                                </ul>
                        </ul>
                    </ul>
                </div>
                <div class="col-2">
                    <div class="form-group">
                        <div class="text-center mb-2"><strong>{{ _('Wortsuche') }}</strong><a tabindex="0" type="button" class="btn btn-link pl-1" data-container="body" data-toggle="popover" data-placement="right" data-trigger="focus" data-content="{{ _('Wildcard-Zeichen sind erlaubt. Ein Fragezeichen (‚?‘) ersetzt ein einzelnes Zeichen, während ein Stern (‚*‘) ein oder mehr Zeichen ersetzt. Beide funktionieren nur innnerhalb eines Wortes. Das bedeutet, dass für die Suche ‚christ* nom*‘ wird jede Reihe von zwei aufeinander folgenden Worten gefunden, wo das erste Wort mit ‚christ‘ und das zweite mit ‚nom‘ anfängt. Wenn Sie diese beiden Worte finden möchten, wo andere Wort zwischen ihnen auftreten können, stellen Sie die ‚Suchradius‘ größer als 0.') }}"><i class="fas fa-question-circle" ></i></a></div>
                        <p>{{ form.q(class="form-control my-0", placeholder=form.q.label.text) }}</p>
                        <p class="mb-0" style="font-size: small"><span title="{{ _('Die Lemmatasuche ist nur für die lateinischen Formeln möglich') }}">{{ form.lemma_search() }} <span class="align-top">{{ form.lemma_search.label }}</span></span> <span title="{{ _('Die Reihenfolge der Wörter behalten') }}">{{ form.in_order() }} <span class="align-top">{{ form.in_order.label }}</span></span></p>
                    </div>
                    <div class="form-row align-items-center justify-content-center"><div class="text-center"><p class="mb-0">{{ form.fuzziness.label }} <a tabindex="0" type="button" class="btn btn-link pl-0" data-container="body" data-toggle="popover" data-placement="right" data-trigger="focus" data-content="{{ _('‚Fuzziness‘ misst, wie viel ein resultierendes Wort von der Sucheingabe abweichen kann und trotzdem ein gültiges Ergebnis darstellen. Die Zahlen stellen, wie viele Änderungen zu einem Wort gemacht werden können. Z.B. 2 bedeutet, dass zwei Buchstaben im Wort ersetzt, gelöscht, hinzugefügt oder umgesetzt werden können. Mit ‚AUTO‘ ist die erlaubte Zahl solcher Änderungen von der Wortlänge abhängig: wenn das Wort 1 oder 2 Buchstaben hat, sind keine Änderungen erlaubt, mit 3-5 Buchstaben ist eine Änderung erlaubt und für längere Wörter sind 2 Anderungen erlaubt. ‚AUTO‘ soll für die meisten Suchen am Besten funktionieren.') }}"><i class="fas fa-question-circle" ></i></a></p><p>{{ form.fuzziness() }}</p></div>
                    </div>
                    <div class="form-row align-items-center justify-content-center"><div class="text-center">{{ form.slop.label }}: 
                        <output for="slop" id="slop-value">{{ form.slop.data }}</output> {{ _('Wörter') }}<a tabindex="0" type="button" class="btn btn-link pl-1" data-container="body" data-toggle="popover" data-placement="right" data-trigger="focus" data-content="{{ _('Die maximale Anzahl der nicht treffenden Wörter, die zwischen den Worten auftreten können. Zum Beispiel für die Suche nach ‚christ* nom*‘ mit einem Suchradius von 50 werden alle Stellen gefunden, wo diese beiden Wörter innerhalb von 50 Wörtern auftauchen.') }}"><i class="fas fa-question-circle" ></i></a></div>
                        {{ form.slop(oninput="outputUpdate(value, '#slop-value')") }}
                    </div>
                </div>
                <div class="col-2 date-search">
                    <h6 class="text-center"><i>{{ _('[NB: Datumsuche gilt nur für Urkunden.]') }}</i><a tabindex="0" type="button" class="btn btn-link pl-1" data-container="body" data-toggle="popover" data-placement="right" data-trigger="focus" data-content="{{ _('Da die Datierung der Formeln sich von der der Urkunden deutlich unterscheidet, wird die Datumssuche anders für die Formel angewandt. Wenn Sie eine Datumssuchen machen, die keinen Monat oder einen Tag enthält, ob für ein bestimmtes Datum oder einen Datumsspanne, werden alle Formeln zurückgegeben, die die anderen Suchkriterien entsprechen. Wenn jedoch ein Monat oder ein Tag angegeben wird, wird die Abfrage keine Formel zurückgeben. Wenn Sie die Urkunden, die von einem Datum Suche mit Tag bzw. Monat zurückgegeben werden, mit Formeln, die die anderen Suchkriterien erfüllen, vergleichen möchten, sollten Sie eine zweite Suche ohne Datum durchführen, die auf die Formel begrenzt ist.') }}"><i class="fas fa-question-circle" ></i></a></h6>
                    <div class="text-center title"><strong>{{ _('Nach einem bestimmten Datum suchen') }}</strong></div>
                    <div class="form-row align-items-center justify-content-center">
                        <div class="form-group">
                            <div class="text-center">{{ form.year.label }}</div>
                            {% if form.year.errors %}
                            {{ form.year(size=4, class="invalid-field form-control") }}
                            {% else %}
                            {{ form.year(size=4, class="form-control") }}
                            {% endif %}
                        </div>
                        <div class="form-group">
                            <div class="text-center">{{ form.month.label }}</div>
                            {% if form.month.errors %}
                            {{ form.month(class="invalid-field form-control") }}
                            {% else %}
                            {{ form.month(class="form-control") }}
                            {% endif %}
                        </div>
                        <div class="form-group">
                            <div class="text-center">{{ form.day.label }}</div>
                            {% if form.day.errors %}
                            {{ form.day(size=2, class="invalid-field form-control") }}
                            {% else %}
                            {{ form.day(size=2, class="form-control") }}
                            {% endif %}
                        </div>                    
                        <div class="form-row align-items-center justify-content-center"><div class="text-center">{{ form.date_plus_minus.label }}: 
                            <output for="date_plus_minus" id="date-plus-minus">{{ form.date_plus_minus.data }}</output> {{ _('Jahr(e)') }}</div>
                            {{ form.date_plus_minus(oninput="outputUpdate(value, '#date-plus-minus')") }}
                        </div>
                    </div>
                    <div class="text-center title"><strong>{{ _('Nach einer Datumspanne suchen') }}</strong></div>
                    <div class="text-center">{{ form.exclusive_date_range(class="align-text-top") }} {{ form.exclusive_date_range.label()}}<a tabindex="0" type="button" class="btn btn-link pl-1" data-container="body" data-toggle="popover" data-placement="right" data-trigger="focus" data-content="{{ _('Eine exklusive Datumspannesuche ist eine spezielle Suche, die nach einer bestimmten Zeitspanne innerhalb des Jahres für eine Reihe von Jahren sucht. Zum Beispiel eine exklusive Suche für den Zeitraum von 7. Oktober 700 bis 21. Oktober 800 findet Dokumente, die zwischen 7. Oktober und 21. Oktober in den Jahren zwischen 700 und 800 datiert sind. Das bedeutet, dass ein Dokument, die um 22. Oktober 700 datiert ist, nicht zurückgegeben wird. Eins, das um den 15. Oktober 750 datiert wird, jedoch schon.') }}"><i class="fas fa-question-circle" ></i></a></div>
                    <div class="text-center"><em>{{ _('Von') }}</em></div>
                    <div class="form-row align-items-center justify-content-center">
                        <div class="form-group">
                            <div class="text-center">{{ form.year_start.label }}</div>
                            {% if form.year_start.errors %}
                            {{ form.year_start(size=4, class="invalid-field form-control") }}
                            {% else %}
                            {{ form.year_start(size=4, class="form-control") }}
                            {% endif %}
                        </div>
                        <div class="form-group">
                            <div class="text-center">{{ form.month_start.label }}</div>
                            {% if form.month_start.errors %}
                            {{ form.month_start(class="invalid-field form-control") }}
                            {% else %}
                            {{ form.month_start(class="form-control") }}
                            {% endif %}
                        </div>
                        <div class="form-group">
                            <div class="text-center">{{ form.day_start.label }}</div>
                            {% if form.day_start.errors %}
                            {{ form.day(size=2, class="invalid-field form-control") }}
                            {% else %}
                            {{ form.day_start(size=2, class="form-control") }}
                            {% endif %}
                        </div>
                    </div>
                    <div class="text-center"><em>{{ _('Bis') }}</em></div>
                    <div class="form-row align-items-center justify-content-center">
                        <div class="form-group">
                            <div class="text-center">{{ form.year_end.label }}</div>
                            {% if form.year_end.errors %}
                            {{ form.year_end(size=4, class="invalid-field form-control") }}
                            {% else %}
                            {{ form.year_end(size=4, class="form-control") }}
                            {% endif %}
                        </div>
                        <div class="form-group">
                            <div class="text-center">{{ form.month_end.label }}</div>
                            {% if form.month_end.errors %}
                            {{ form.month_end(class="invalid-field form-control") }}
                            {% else %}
                            {{ form.month_end(class="form-control") }}
                            {% endif %}
                        </div>
                        <div class="form-group">
                            <div class="text-center">{{ form.day_end.label }}</div>
                            {% if form.day_end.errors %}
                            {{ form.day_end(size=2, class="invalid-field form-control") }}
                            {% else %}
                            {{ form.day_end(size=2, class="form-control") }}
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            <div class="row justify-content-center pt-2">{{ form.submit(size=32, class="btn btn-lg btn-secondary") }}</div>
            <br>
            <div class="row justify-content-center py-0"><a class="btn btn-sm btn-secondary" href="{{ url_for('search.r_advanced_search') }}" role=button>{{ _('Form zurücksetzen') }}</a></div>
        </form>
{% endblock %}
